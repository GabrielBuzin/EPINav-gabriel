{%extends %}{% extends "app_EPINav/base.html" %}
{% load static %}
{% block title %}botão modo escuro{% endblock title %}

{% block content %}
 <!-- Botão único para alternar tema -->
<button id="themeToggle" class="btn btn-outline-secondary ms-auto">
    <i class="fa-solid fa-moon"></i>
</button>
{% endblock content %}

{% block scripts %}
<script>
    const html = document.documentElement;
    const btn = document.getElementById("themeToggle");
    const icon = btn.querySelector("i");
    const logo = document.getElementById("logo");

    // URLs dos logos
    const logoLight = "{% static 'app_EPINav/images/logo.perfil.svg' %}";
    const logoDark = "{% static 'app_EPINav/images/logo.perfil.svg' %}";

    // Atualiza ícone e logo
    function updateThemeVisuals(theme) {
        // ícone
        icon.className = theme === "dark" ? "fa-solid fa-sun" : "fa-solid fa-moon";
        // logo
        logo.src = theme === "dark" ? logoDark : logoLight;
    }

    // Carregar preferência salva
    const savedTheme = localStorage.getItem("theme") || "light";
    html.setAttribute("data-mdb-theme", savedTheme);
    updateThemeVisuals(savedTheme);

    // Alternar tema ao clicar no botão
    btn.addEventListener("click", () => {
        const newTheme = html.getAttribute("data-mdb-theme") === "dark" ? "light" : "dark";
        html.setAttribute("data-mdb-theme", newTheme);
        localStorage.setItem("theme", newTheme);
        updateThemeVisuals(newTheme);
    });
</script>
{% endblock scripts %}
